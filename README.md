?# Id Locator

פרויקט פייתון עבור איתור זהות של אנשים לפי כתובת ומספר תעודת זהות, עם תמיכה באלגוריתם Soundex לתיקון שגיאות כתיב בשמות ובכתובות.

## תכונות עיקריות
- טעינה קלה של נתונים מקובץ CSV או מקריאה ישירה בקוד.
- חיפוש לפי תעודת זהות, כתובת או שם מלא.
- מנגנון Soundex פנימי שמאפשר התאמות גמישות לשמות וכתובות עם שגיאות כתיב נפוצות.
- ממשק CLI בסיסי לקבלת שאילתות מהמשתמש והצגת תוצאות.
- מסך UI מבוסס Flask לטעינת קבצים ולהצגת תוצאות בצורה גרפית, כולל אפשרות להוריד תבנית ריקה וסט בדיקה של 20 רשומות בעברית.

## התקנה והפעלה
1. ודאו שיש לכם Python 3.10 ומעלה מותקן.
2. התקינו את התלויות באמצעות:
   ```bash
   pip install .
   ```
3. להרצת ה-CLI:
   ```bash
   python -m idlocator.cli --help
   ```
4. להרצת מסך ה-UI:
   ```bash
   python -m idlocator.web.app
   ```
   השרת יעלה בכתובת http://127.0.0.1:5000/ (זוהי ברירת המחדל).

   אם פורט 5000 תפוס, ניתן להריץ את השרת על פורט אחר באמצעות הפקודה:
   ```bash
   python -m idlocator.web.app --port 8080
   ```
   במקרה זה, האתר יהיה זמין בכתובת http://127.0.0.1:8080/.

   במסך הראשי תמצאו שני כפתורי הורדה:
   - "הורדת קובץ תבנית ריק" (למילוי נתונים משלכם)
   - "הורדת קובץ דוגמה (20 רשומות בעברית)"
   ניתן למלא את הקבצים הללו ולהעלות אותם בחזרה דרך טופס הטעינה.

## קבצי נתונים לדוגמה
- `data/sample_people.csv` – קובץ בסיסי עם שלוש רשומות.
- `data/sample_people_20.csv` – סט בדיקות גדול יותר עם 20 רשומות בעברית לצרכי הדגמה ובדיקות.
- `data/people_template.csv` – תבנית ריקה למילוי.

## בדיקות
- הרצת בדיקות יחידה (לוגיקה):
  ```bash
  python -m unittest tests.test_service
  ```
- הרצת בדיקות ממשק CLI (אזור UI):
  ```bash
  python -m unittest tests.ui.test_cli_ui
  ```

## מבנה הפרויקט
```
idlocator/
??? __init__.py
??? cli.py
??? models.py
??? repository.py 
??? service.py
??? soundex.py
??? web/
    ??? __init__.py
    ??? app.py
    ??? templates/
        ??? index.html  <-- קובץ ה-HTML של האתר
data/
??? people_template.csv
??? sample_people.csv
??? sample_people_20.csv
tests/
??? __init__.py
??? test_service.py
??? ui/
    ??? __init__.py
    ??? test_cli_ui.py
pyproject.toml
README.md
```

## רעיונות להרחבה
- אינטגרציה למסד נתונים אמיתי במקום קובץ CSV.
- שימוש באלגוריתמים נוספים להתאמת מחרוזות (כגון Levenshtein או fuzzywuzzy).
- שילוב REST API באמצעות FastAPI או Flask.

## Deploying to Google Cloud Run
To serve the Flask UI on the public internet you can deploy the app to Cloud Run and let Firebase Hosting proxy traffic to it.

1. Install the Google Cloud SDK and authenticate:
   ```bash
   gcloud auth login
   gcloud config set project idlocator-627e0
   ```
2. Build and push the container image using the Dockerfile in the project root:
   ```bash
   gcloud builds submit --tag gcr.io/idlocator-627e0/idlocator-web
   ```
3. Deploy the service to Cloud Run (choose the same region you will reference from Firebase, for example `us-central1`):
   ```bash
   gcloud run deploy idlocator-web \
     --image gcr.io/idlocator-627e0/idlocator-web \
     --platform managed \
     --region us-central1 \
     --allow-unauthenticated
   ```
4. After the service is live, redeploy Firebase Hosting so `firebase.json` routes all traffic to Cloud Run:
   ```bash
   firebase deploy --only hosting
   ```
5. Visit either the Cloud Run URL that is returned by step 3 or the Firebase Hosting URL (`https://idlocator-627e0.web.app`) to use the UI.


